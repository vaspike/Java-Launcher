# 聚合启动功能

聚合启动功能允许您创建自定义的启动配置集合，可以按顺序执行多个Java应用程序或服务。这在微服务开发、多模块项目或需要同时启动多个组件的场景中特别有用。

## 功能特性

- 🚀 **批量启动**: 一次性启动多个Java应用
- ⏰ **延迟控制**: 为每个启动项设置启动延迟时间
- 🎛️ **灵活管理**: 启用/禁用特定的启动项
- 📋 **可视化管理**: 直观的图形界面管理配置
- 💾 **持久化存储**: 配置保存在工作区的`.vscode/aggregated-launch.json`文件中

## 使用步骤

### 1. 创建聚合启动配置

1. 打开命令面板 (`Ctrl+Shift+P` 或 `Cmd+Shift+P`)
2. 搜索 "Create Aggregated Launch Configuration"
3. 输入配置名称（例如：`Aggregated-run`）
4. 输入描述（可选）
5. 选择要包含的启动配置

### 2. 管理聚合启动配置

1. 打开命令面板
2. 搜索 "Manage Aggregated Launch Configurations"
3. 选择要管理的配置
4. 可以执行以下操作：
   - 📝 **编辑**: 修改描述或管理启动项
   - ▶️ **执行**: 立即执行该聚合启动
   - 🗑️ **删除**: 删除整个配置
   - 📋 **查看详情**: 查看配置的详细信息

### 3. 执行聚合启动

有两种方式执行聚合启动：

#### 方式一：通过管理界面
1. 使用 "Manage Aggregated Launch Configurations" 命令
2. 选择配置后点击 "执行"

#### 方式二：直接执行
1. 打开命令面板
2. 搜索 "Execute Aggregated Launch Configuration"
3. 选择要执行的配置

## 配置管理

### 启动项管理

对于每个聚合启动配置，您可以：

- **启用/禁用启动项**: 控制哪些配置会被执行
- **设置延迟时间**: 为每个启动项设置延迟（毫秒）
- **调整执行顺序**: 通过重新排列启动项来控制执行顺序
- **添加新启动项**: 将新的启动配置添加到现有聚合中
- **移除启动项**: 从聚合配置中移除不需要的启动项

### 延迟设置

延迟功能对于以下场景很有用：

- **依赖启动**: 某些服务需要等待其他服务完全启动
- **资源控制**: 避免同时启动过多应用造成系统负担
- **启动顺序**: 确保按正确顺序启动相关组件

例如：
- 数据库服务：0ms 延迟（立即启动）
- 后端API：5000ms 延迟（等待数据库启动）
- 前端应用：10000ms 延迟（等待API就绪）

## 示例场景

### 微服务项目

```
聚合启动配置: "启动所有微服务"
├── 配置注册中心 (延迟: 0ms)
├── 用户服务 (延迟: 3000ms)
├── 订单服务 (延迟: 3000ms)
├── 支付服务 (延迟: 5000ms)
└── API网关 (延迟: 8000ms)
```

### 开发环境

```
聚合启动配置: "开发环境"
├── 数据库 (延迟: 0ms)
├── Redis缓存 (延迟: 1000ms)
├── 后端API (延迟: 3000ms)
└── 前端开发服务器 (延迟: 5000ms)
```

### 测试环境

```
聚合启动配置: "集成测试"
├── 测试数据库 (延迟: 0ms)
├── Mock服务 (延迟: 2000ms)
├── 被测应用 (延迟: 4000ms)
└── 测试套件 (延迟: 6000ms)
```

## 进度监控

执行聚合启动时，您将看到：

- 📊 **进度条**: 显示整体执行进度
- 📝 **状态信息**: 当前正在启动的配置
- ⏱️ **等待提示**: 延迟等待期间的提示信息
- ❌ **错误处理**: 失败时的选择（继续或停止）

## 错误处理

如果某个启动项失败：

1. 系统会显示错误信息
2. 询问是否继续执行剩余项目
3. 您可以选择：
   - **继续**: 跳过失败项，继续启动其他配置
   - **停止**: 终止整个聚合启动过程

## 配置文件格式

聚合启动配置存储在 `.vscode/aggregated-launch.json` 文件中：

```json
{
  "version": "1.0.0",
  "configs": [
    {
      "name": "Aggregated-run",
      "description": "启动所有微服务",
      "items": [
        {
          "name": "数据库服务",
          "enabled": true,
          "delay": 0
        },
        {
          "name": "用户服务",
          "enabled": true,
          "delay": 3000
        },
        {
          "name": "订单服务",
          "enabled": false,
          "delay": 3000
        }
      ],
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T12:00:00.000Z"
    }
  ]
}
```

## 注意事项

1. **启动配置依赖**: 聚合启动需要先存在相应的VS Code启动配置
2. **资源限制**: 同时启动多个应用可能消耗大量系统资源
3. **网络端口**: 确保各应用使用不同的端口，避免冲突
4. **启动顺序**: 合理设置延迟时间，确保依赖服务优先启动
5. **错误恢复**: 建议为关键服务设置重启机制

## 最佳实践

- 🎯 **明确命名**: 使用清晰的配置和启动项名称
- ⏰ **合理延迟**: 根据实际启动时间设置延迟
- 🔄 **测试验证**: 定期测试聚合启动配置的有效性
- 📝 **文档记录**: 为复杂的聚合配置添加详细描述
- 🚀 **渐进启动**: 从简单配置开始，逐步增加复杂度

享受更高效的Java开发体验！ 🚀 